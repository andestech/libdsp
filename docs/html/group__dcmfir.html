<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Andes DSP Library: Decimation FIR Filter Function</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="andes_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Andes DSP Library
   &#160;<span id="projectnumber">V2.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__dcmfir.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Decimation FIR Filter Function<div class="ingroups"><a class="el" href="group__filter.html">Filtering Functions</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structriscv__dsp__dcmfir__f32__t.html">riscv_dsp_dcmfir_f32_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structriscv__dsp__dcmfir__q15__t.html">riscv_dsp_dcmfir_q15_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structriscv__dsp__dcmfir__q31__t.html">riscv_dsp_dcmfir_q31_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf18a3b5776736ecf446afd828f19eb03"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcmfir.html#gaf18a3b5776736ecf446afd828f19eb03">riscv_dsp_dcmfir_f32</a> (const <a class="el" href="structriscv__dsp__dcmfir__f32__t.html">riscv_dsp_dcmfir_f32_t</a> *instance, float32_t *src, float32_t *dst, uint32_t size)</td></tr>
<tr class="separator:gaf18a3b5776736ecf446afd828f19eb03"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga74524294f901422de97cf2148db35096"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcmfir.html#ga74524294f901422de97cf2148db35096">riscv_dsp_dcmfir_q15</a> (const <a class="el" href="structriscv__dsp__dcmfir__q15__t.html">riscv_dsp_dcmfir_q15_t</a> *instance, q15_t *src, q15_t *dst, uint32_t size)</td></tr>
<tr class="separator:ga74524294f901422de97cf2148db35096"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga331570cb4d78e63683edb9d0e4001a9f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcmfir.html#ga331570cb4d78e63683edb9d0e4001a9f">riscv_dsp_dcmfir_fast_q15</a> (const <a class="el" href="structriscv__dsp__dcmfir__q15__t.html">riscv_dsp_dcmfir_q15_t</a> *instance, q15_t *src, q15_t *dst, uint32_t size)</td></tr>
<tr class="separator:ga331570cb4d78e63683edb9d0e4001a9f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae210ed543d0260d7ab63bffb68670178"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcmfir.html#gae210ed543d0260d7ab63bffb68670178">riscv_dsp_dcmfir_q31</a> (const <a class="el" href="structriscv__dsp__dcmfir__q31__t.html">riscv_dsp_dcmfir_q31_t</a> *instance, q31_t *src, q31_t *dst, uint32_t size)</td></tr>
<tr class="separator:gae210ed543d0260d7ab63bffb68670178"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf051ded27a2b0f0fb6c6a684dc789f7a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__dcmfir.html#gaf051ded27a2b0f0fb6c6a684dc789f7a">riscv_dsp_dcmfir_fast_q31</a> (const <a class="el" href="structriscv__dsp__dcmfir__q31__t.html">riscv_dsp_dcmfir_q31_t</a> *instance, q31_t *src, q31_t *dst, uint32_t size)</td></tr>
<tr class="separator:gaf051ded27a2b0f0fb6c6a684dc789f7a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The decimation FIR filter function implements FIR filter with decimation by an integer factor M. They can be presented by the following equation:</p>
<div class="image">
<img src="dcmfir.gif" alt=""/>
</div>
<p>Where b[k] is the filter coefficient, src is the input data of the length Size, and dst is the output data of the length Size/M. Size must be a multiple of the decimation factor M so that the number of output samples can be an integer.</p>
<p>Andes DSP library supports distinct decimation FIR filter functions and instance structures for the following data types: single-precision floating-point, Q31 and Q15. Before you use decimation FIR filter functions, make sure you initialize the corresponding instance structure first. These functions and their instance structures are introduced in the subsections below. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaf18a3b5776736ecf446afd828f19eb03"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf18a3b5776736ecf446afd828f19eb03">&#9670;&nbsp;</a></span>riscv_dsp_dcmfir_f32()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_dsp_dcmfir_f32 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structriscv__dsp__dcmfir__f32__t.html">riscv_dsp_dcmfir_f32_t</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float32_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float32_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>single-precision floating-point decimator FIR filters function </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>pointer of the instance structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>pointer of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>pointer of the output vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of samples</td></tr>
  </table>
  </dd>
</dl>
<p><b>Example</b> </p><pre>
With the input size as 24, the decimation factor M as 4 and the filter coefficient
size as 6, set the instance of the decimation FIR filter as:</pre><pre>    #define size       24
    #define M           4
    #define coeff_size  6
    float32_t coeff[coeff_size] = {…};
    float32_t state[coeff_size + size - 1];
    <a class="el" href="structriscv__dsp__dcmfir__f32__t.html" title="Structure for the f32 Decimator FIR Filters.">riscv_dsp_dcmfir_f32_t</a> inst = {M, coeff_size, coeff, state};
    float32_t src[size] = {0.1, -0.2, 0.2, 0.3, 0.4, 0.1, …};
    float32_t dst[size / M];
    riscv_dsp_dcmfir_f32(&amp;inst, src, dst, size);</pre><pre>This example also serves as a reference for examples of Q31 or Q15 decimation FIR filter
functions.
    </pre> 
</div>
</div>
<a id="ga74524294f901422de97cf2148db35096"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga74524294f901422de97cf2148db35096">&#9670;&nbsp;</a></span>riscv_dsp_dcmfir_q15()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_dsp_dcmfir_q15 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structriscv__dsp__dcmfir__q15__t.html">riscv_dsp_dcmfir_q15_t</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q15_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q15_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Q15 decimator FIR filters function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>pointer of the instance structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>pointer of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>pointer of the output vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of samples</td></tr>
  </table>
  </dd>
</dl>
<p><b>Note:</b> </p>
<p>Both coefficients and state variables are represented in Q15 format. A 64-bit accumulator is used to do multiply-accumulate operations with saturation to yield a Q33.30 result. After all operations are performed, the results are saturated to Q15 format. </p>

</div>
</div>
<a id="ga331570cb4d78e63683edb9d0e4001a9f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga331570cb4d78e63683edb9d0e4001a9f">&#9670;&nbsp;</a></span>riscv_dsp_dcmfir_fast_q15()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_dsp_dcmfir_fast_q15 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structriscv__dsp__dcmfir__q15__t.html">riscv_dsp_dcmfir_q15_t</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q15_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q15_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Q15 decimator fast FIR filters function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>pointer of the instance structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>pointer of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>pointer of the output vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of samples</td></tr>
  </table>
  </dd>
</dl>
<p><b>Note:</b> </p>
<ol type="1">
<li>Both coefficients and state variables are represented in Q15 format. A 32-bit accumulator is used to do multiply-accumulate operations with saturation to yield a Q2.30 result. If the accumulator result overflows, it wraps around and distorts the result. In order to avoid overflows completely, the input signal must be scaled down by log2(coeff_size) bits. After all operations are performed, the Q2.30 accumulator is then truncated to Q2.15 format and saturated to yield the Q1.15 result.</li>
<li>When compared with riscv_dsp_dcmfir_q15, this function delivers higher performance. </li>
</ol>

</div>
</div>
<a id="gae210ed543d0260d7ab63bffb68670178"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae210ed543d0260d7ab63bffb68670178">&#9670;&nbsp;</a></span>riscv_dsp_dcmfir_q31()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_dsp_dcmfir_q31 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structriscv__dsp__dcmfir__q31__t.html">riscv_dsp_dcmfir_q31_t</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q31_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q31_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Q31 decimator FIR filters function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>pointer of the instance structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>pointer of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>pointer of the output vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of samples</td></tr>
  </table>
  </dd>
</dl>
<p><b>Note:</b> </p>
<p>Both coefficients and state variables are represented in Q31 format. A 64-bit accumulator is used to do multiply-accumulate operations with saturation to yield a Q1.62 result. After all operations are performed, the results are saturated to Q31 format. </p>

</div>
</div>
<a id="gaf051ded27a2b0f0fb6c6a684dc789f7a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf051ded27a2b0f0fb6c6a684dc789f7a">&#9670;&nbsp;</a></span>riscv_dsp_dcmfir_fast_q31()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void riscv_dsp_dcmfir_fast_q31 </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structriscv__dsp__dcmfir__q31__t.html">riscv_dsp_dcmfir_q31_t</a> *&#160;</td>
          <td class="paramname"><em>instance</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q31_t *&#160;</td>
          <td class="paramname"><em>src</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">q31_t *&#160;</td>
          <td class="paramname"><em>dst</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Q31 decimator fast FIR filters function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">instance</td><td>pointer of the instance structure </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">src</td><td>pointer of the input vector </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">dst</td><td>pointer of the output vector </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">size</td><td>number of samples</td></tr>
  </table>
  </dd>
</dl>
<p><b>Note:</b> </p>
<ol type="1">
<li>Both coefficients and state variables are represented in Q31 format. A 32-bit accumulator is used to do multiply-accumulate operations and truncated to Q2.30 result. To avoid overflows that distort the result, the input signal must be scaled down by log2(coeff_size) bits. After all operations are performed, the results are saturated and converted to Q1.31 format.</li>
<li>When compared with riscv_dsp_dcmfir_q31, this function delivers higher performance with lower precision. </li>
</ol>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
